import { createReducer } from "@reduxjs/toolkit";
import * as Actions from "./actions";
import _ from "lodash";
import { RequestResponse } from "./response";
import { initKeys } from "../components/utility/commonInitValues";
import { updateStateKeys } from "./stateUtilities";

const initialState = {
    keys:initKeys
  }

export const keysReducer = createReducer(initialState, {
    [Actions.updateSprintKeys.type]: (state: any, expanded: any) => {
        let newState = _.cloneDeep(state);
        const temp = expanded.payload as number[];
        newState.keys = {...newState.keys, sprintKeys:updateStateKeys(newState.keys.sprintKeys,temp)};
        return newState;
      },
      [Actions.updatePBIKeys.type]: (state: any, expanded: any) => {
        let newState = _.cloneDeep(state);
        const temp = expanded.payload as number[];
        newState.keys = {...newState.keys, pbiKeys:updateStateKeys(newState.keys.pbiKeys,temp)};
        return newState;
      },
    });